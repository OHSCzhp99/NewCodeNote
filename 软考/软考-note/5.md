## 上午 - 数据库
---
### 1. 三级模式结构、两级映像
```c
三级模式结构：
① 概念模式 - 基本表
② 外模式 - 视图
③ 内模式 - 存储文件

两级映像：
① 模式/内模式 - 概念模式与内模式转换（物理独立性）
② 外模式/模式 - 外模式与概念模式转换（逻辑独立性）
数据的物理和逻辑独立性，为了保证能够执行，需要修改映像
```

### 2. 连接、选择、投影
```c
关系模型是二维表格
----------------------
关系代数表达式：一般是用两个表来连接，然后选择满足的列数、再投影满足列数
（两表的列数相同则需要标出R.A或者S.A，不相同的列数直接A）

笛卡尔积：全排列（表1的一行全部列与表2一行的全部列结合）
选择：全排列后的列数满足
投影：选择后的列数满足

自然连接的属性列数：两表的列数去重，保留左边和剩下的列（元关系，个）
自然连接的元组个数：两表的相同列名中的所有列全相同

左连接：以两表相同的列名为基准，所有列相同则两表所有列照写，不同则左表所有列照写，右表补null
右连接：同上反之
全连接：左连接+右连接再去重

------------------------
做题时，笛卡尔积和自然连接要看清楚（自然连接序号要去重的） 
```
<div style="background-color: rgb(206, 225, 225);  padding:20px; background-repeat: repeat;">
<div style="width:650px;"><img src="软考/img/连接.jpg" alt=""></div>
</div>

### 3. SQL语言转换
```c
投影选择转SQL：（投影是列，选择是条件）
select A,B,C from R where B>='5';

笛卡尔积转SQL：（笛卡尔积是表）
select R.A,R.B,R.C,S.A,S.B,S.C from R,S;

自然连接转SQL：（自然连接也是条件，但是查询的列要去重列名）
select R.A,R.B,R.C,S.D from R,S where R.B=S.B and R.C=S.C
```

### 4. 综合查询
```c
结合题目
```

### 5. SQL控制语句
```c
一般在操作后面 +on
权限：GRANT
撤销：REVOKE

WITH GRANT OPTION 把权限给某人
```

### 6. 视图
```c
视图的作用相当于权限、约束
视图是虚拟表，查询时可一个多个基本表中导出

WITH CHECK OPTION 对视图进行约束
```

### 7. 索引
```c
给内模式（存储文件）添加索引
```

### 8. 关系模式 - 闭包
```c
候选键（主键）能够推出其他属性，反之候选键不能被推
候选键可具有多个

闭包：闭包能够推出候选键，通过包含关系可以推出来
依赖冗余：A->B  B->C  A->C 则有A->C 就不用了，算冗余
```

### 9. 范式
```c
候选键（主键）：没有在右边出现过的

1NF：有部分依赖（看候选键，如果几个候选键中的部分候选键也能够单独推出，则存在部分依赖）
2NF：有传递依赖（看被候选键推出的那个属性能不能推出其他的，即存在A->B  B->C  A->C的方式）
（伪传递：几个候选键推出属性，该属性能结合其他属性1推出其他属性2，其他属性2为非主属性，则存在传递依赖）
（但是如果能推出来也不一定就有传递依赖，还要看看A是不是真的是候选码，既A不能被反推）

3NF：左边不全是候选键
BCNF：左边全是候选键
```

### 10. 关系分解
```c
① 将候选键写出来（一般题目说属性1可以提供属性2，则属性1为候选键）
② 再把候选键中的部分依赖写出来（在多个候选键中的部分候选键能单独推出其他属性，
则该部分候选键应该分解出单独的表，然后在表中将部分候选键变为主键，其他属性变为非主属性）
```

### 11. 无损连接和保持函数依赖
```c
无损连接：两个表自然连接（相同属性列写一个就好，去重），再跟原来的属性相比，如果缺了就是有损链接
R{A1,A2,A3,A4}
R1{A1,A2} 和 R2{A1,A3} //自然连接为A1,A2,A3，缺A4，为有损链接
---------------------
保持函数依赖：子表中单个表就能包含函数依赖集中依赖关系，则为保持依赖关系
F={A->B,A->C,C->D,AE->G}
R1={A,B,C} 和 R2{D,E,G} //没有，因为C->D被分成两个表了
R1={A,B,C,D} 和 R2{A,E,G} //有，函数依赖集中的关系没有被分成两个表
```

### 12. E-R图
```c
复合属性：可再分的属性（例如家庭住址，邮编、省、市、街道）
派生属性：该属性通过另一个属性计算得来
多值属性：该属性有多个值（例如联系方式，有个人电话和办公室号码）

外键：将保存表中主键值的一列或多列添加到另一个表中，可创建两个表之间的链接
```

### 13. 概念设计阶段 - E-R图
```c
冲突：
① 属性冲突：同一个属性再不同E-R中的类型的不一致
② 命名冲突：相同意义的属性在不同的E-R图中有不同的命名
③ 结构冲突：同一个实体再不同E-R图中有不同属性
```

### 14. 逻辑设计阶段 - 关系模式
```c
1对1、 1对*、 *对*的判定：根据题目文字描述，然后合并起来
-----------------------
实体向关系模式的转换：（实体之间的属性关系加入到实体中）

例如有实体1和实体2：
将关系添加到任意实体中：如加入实体1，则需加入实体2的主键，和关系本身的属性
（1对n的情况，要加入n的实体中）
（n对n的情况，关系模式要单独一个表，需加入实体1和实体2的主键，和关系本身的属性）
```

### 15. 物理设计阶段 - 实施与维护
```c
确定系统边界：需求分析（需求说明文档、数据字典和数据流图）
关系规范化：逻辑设计阶段
```

### 16. 事务管理
```c
事务管理：原子性、一致性、隔离性、持久性
```

### 17. 数据库备份与恢复
```c
在尽可能短的时间内，把数据库恢复到故障发生前的状态
```

### 18. 封锁
```c
排它锁：只允许该事务对数据对象的读取和修改，其他事务不行
共享锁：该事务只能对其读取不能修改，其他事物也是，直到该事务解锁
```

### 19. 分布式数据库
```c
分片透明：指用户或应用程序不需要知道逻辑上访问的表具体是怎么分块存储的
复制透明：指采用复制技术的分布方法，用户不需要知道数据是复制到哪些节点，如何复制的
位置透明：指用户无须知道数据存放的物理位置
逻辑透明：指用户或应用程序无需知道局部场地使用的是哪种数据模型

共享性：指数据存储在不同的结点数据共享
自治性：指每结点对本地数据都能独立管理
可用性：指当某一场地故障时，系统可以使用其他场地上的副本而不至于使整个系统瘫疾
分布性：指数据在不同场地上的存储
```

### 20. 杂题
```c
存储过程：保证数据库关系模式不会被第三方所获取
```