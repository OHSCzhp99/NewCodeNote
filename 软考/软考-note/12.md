## 上午 - 操作系统
---
### 1. 前趋驱进程图
```c
顺序执行：
信号量：保证左边最小，右边从小到大
P(S) 进程 V(S)

并发执行：
根据图找规律
```

### 2. 进程的三态模型
```c

```
<div style="background-color: rgb(206, 225, 225);  padding:20px; background-repeat: repeat;">
<div style="width:300px;"><img src="软考/img/进程三态.jpg" alt=""></div>
</div>

### 3. 信号量、同步和互斥（PV）
```c
信号量：（P-1  V+1）
S=0，没有可用资源
S=n，n个可用资源
S=-n，n个等待资源

信号量取值范围：-(n-5)~5（如果有5个可用资源）
----------------------------
信号量初始值：在临界区前为n（如果为n的话，即多少就为多少）
互斥信号量：初始值为1，在临界区同步出现
```

### 4. 死锁
```c
资源n、进程n、需求k
是否发生死锁：m ≥ n*(k-1)+1
```

### 5. 进程资源图
```c
先分配，再申请：
根据箭头先给进程，再判断进程所需申请多少箭头（资源），如果资源不够申请给它，则可能发生死锁

能不能化简：（不能化简则为死锁）
几个进程中有一个进程没发生死锁，则可能释放资源给其他进程从而化简
```

### 6. 死锁避免计算
```c
题目给出：最大需求量  已分配资源量

先自己列出：仍需（最大需求量-已分配资源量）、可用（可用资源-已分配资源，要按列减）
最后看看剩余的可用能不能给仍需（每个P进程做比较）
```
<div style="background-color: rgb(206, 225, 225);  padding:20px; background-repeat: repeat;">
<div style="width:650px;"><img src="软考/img/死锁避免.jpg" alt=""></div>
</div>

### 7. 进程和线程
```c
线程可以共享进程中的数据，但线程之间是不可见的（栈指针不可访问）
```

### 8. 时间、空间局限性
```c
时间局限性：指针或存储单元被访问后 不久将来可能会再次被访问
空间局限性：存储单元被访问后，其附近的存储单元也可能会被访问
```

### 9. 局部性原理 和 分页存储管理
```c
不在内存里的页号（页帧号为0）不做讨论
按照顺序分别看哪个为0淘汰谁：状态位、访问位、修改位

将给十六进制逻辑地址的 最左边的数字对应页号，让改页帧号代替最左边的数字，即为物理地址
```
<div style="background-color: rgb(206, 225, 225);  padding:20px; background-repeat: repeat;">
<div style="width:650px;"><img src="软考/img/局部性原理.jpg" alt=""></div>
</div>

### 10. 段页式存储
```c
段号 页号 页内地址
都是左-右+1（算出来二进制跟十进制互相转换）
描述最多可有几个段（段号），每个段最大允许有几个页（页号），页的大小为几K（业内地址）
```

### 11. 单、双缓冲区
```c
T读入缓冲、M送至用户区、C处理时间
单缓冲：(T+M)*n+C
双缓冲：T*n+M+C
```

### 12. 磁盘调度算法
```c
先来先服务（FCFS）：
最短寻道时间优先（SSTF）：看左右哪个短就去哪个
扫描算法或电梯调度（SCAN）：从一段开始走到底，再反方向走到底
单向扫描或循环扫描（CSCAN）：从一段开始走到底，再从另一边出现

做题：
根据移动臂（磁头）在几号，跟题目给出的序号和柱面号大小排序
```
<div style="background-color: rgb(206, 225, 225);  padding:20px; background-repeat: repeat;">
<div style="width:650px;"><img src="软考/img/磁盘调度.jpg" alt=""></div>
</div>

### 13. 旋转调度算法（计算繁琐）
```c
难题：（图一）
先一圈时间/N个物理块得出 每个物理块旋转多久
第一个物理块= 旋转+处理时间
后面的物理块= (回到时间第二块+旋转+处理)*剩下块

最长时间：上面算出来相加就行
最短时间：(旋转+处理时间)*N个块

容易题：（图二）
(块*旋转+延迟+传输)*K个磁道
```
<div style="background-color: rgb(206, 225, 225);  padding:20px; background-repeat: repeat;">
<div style="width:650px;"><img src="软考/img/旋转调度算法.jpg" alt=""></div>
</div>
<div style="background-color: rgb(206, 225, 225);  padding:20px; background-repeat: repeat;">
<div style="width:650px;"><img src="软考/img/旋转调度算法2.jpg" alt=""></div>
</div>

### 14. 多级索引结构（从0块开始）
```c
假设8地址块，磁盘大小为1KB，地址大小为4B
磁盘大小/地址大小 = 每块地址项的容量（这里得出容量是256）
直接地址是 块对块（5个直接地址则有4块，从0开始）
一级间接地址是 块*容量（2个一级则有516(512+4)块）
二级间接地址是 容量*容量（一个二级则66052(256*256+516)）
最大长度为二级+1，因为从0开始
```
<div style="background-color: rgb(206, 225, 225);  padding:20px; background-repeat: repeat;">
<div style="width:650px;"><img src="软考/img/多级索引.jpg" alt=""></div>
</div>

### 15. 文件目录结构
```c
全文件名：盘符到文件名（前面有\）
绝对路径：全文件名去掉文件名（前面有\）
相对路径：本路径开始最后一个\（前面没有\，后有\）
```

### 16. 位示图
```c
求该物理块在位示图中的编号：(物理块/字长)-1 （因为-1是物理块从0开始）

求位示图大小需要多少字：磁盘容量/物理块大小/字长 = 所需字
字长：题目出的一般在32位、64位、128位等等
磁盘容量：1024GB、2048GB等等（要/1024，转M单位）
物理块大小：1MB、4MB、8MB等等
```
<div style="background-color: rgb(206, 225, 225);  padding:20px; background-repeat: repeat;">
<div style="width:650px;"><img src="软考/img/位示图2.jpg" alt=""></div>
</div>
<br/>
<div style="background-color: rgb(206, 225, 225);  padding:20px; background-repeat: repeat;">
<div style="width:650px;"><img src="软考/img/位示图.jpg" alt=""></div>
</div>

### 17. 杂题
```c
I/O：用户进程、设备无关软件、设备驱动软件、中断处理程序、硬件
磁盘调度：先移臂再旋转，同一个磁道只需旋转
```
