## Java
---
### 1. 动态代理
```java
1.代理可以无侵入式的给对象增强其他的功能，代理里面就是对象要被代理的方法
步骤：调用者 -> 代理 -> 对象

2.java通过接口保证代理，对象和代理都需要实现同一个接口，接口中就是被代理的所有方法
这要就可以将对象和代理联系起来，并且知道了需要代理什么方法
```

### 2. 创建代理
```java
java.lang.reflect.Proxy类：提供了为对象产生代理对象的方法

只要实现这个方法，就可以在里面写具体的代理过程
该方法有3个参数：指定类加载器去加载代理类、指定代理接口、指定代理对象要干什么事
newProxyInstance()
```

### 3. 创建代理的例子
```java
1.创建代理接口（指定想要被代理的方法，对象要实现这个代理接口，代理要具体完成这个代理接口）
public interface Star{
    public abstract String sing(String name); //唱歌方法要被代理
    public abstract void dance(); //跳舞方法要被代理
}
-----------------------------
2.创建要被代理的类：（对象）
public class BigStar implements Start{
    private String name;
    //无参、有参构造
    @Override //这里加上重写注解标识，表明该方法被代理
    public String sing(String name){
        System.out.println(this.name + "正在唱" + name);
        return "谢谢";
    }
    @Override
    public String sing(String name){
        System.out.println(this.name + "正在唱" + name);
        return "谢谢";
    }
}
-----------------------------
3.创建具体的代理（为对象创建的代理）
public class ProxyUtil{

    public static Star createProxy(BigStar bigStar){ //编写一个创建代理的方法，里面实现newProxyInstance()
    Star star = Proxy.newProxyInstance(
        ProxyUtil.class.getClassLoader(), //第一个参数 指明哪个类去执行代理
        new Class[]{Star.class} //第二个参数 要代理的方法，其实就是在代理接口里
        new InvocationHandler(){ //第三个参数 代理对象要干什么事
            @Override
            public Object invoke(Object proxy, Method method, Object[] args) throws Throwable{
                //这里又有三个参数：代理对象、要运行的方法 比如sing/dance、调用方法时传递的实参
                //如果第三个参数的实参 = 第二个参数定义的方法名，也就是实参"sing" = 方法名"sing"
                if("sing".equals(method.getName())){ 
                    System.out.println("准备话筒，收钱")
                }else if("dance".equals(method.getName())){
                    System.out.println("准备场地，收钱")
                }
                //代理结束了，去找大明星开始唱歌或跳舞
                //调用大明星里面唱歌跳舞方法
                return method.invoke(bigStar,args); //这里是穿传具体对象、参数
            }
        }

        )

    return star;
    }
}

-----------------------------
4.Test类测试：
//创建要被代理的对象
BigStar bigStar = new BigStar("鸡哥");
//通过代理类里面我们写的代理方法 createProxy，把对象要被代理的对象传过去
Star proxy = ProxyUtil.createProxy(bigStar); 
//此时代理类拿到被代理的对象后，我们就可以操作代理 来实现被代理对象的操作
String result = proxy.sing("只因你太美");
System.out.println(result);
```