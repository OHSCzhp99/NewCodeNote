## SpringBoot

根据大佬所写 https://blog.csdn.net/weixin_43888891/article/details/126171740

---
### 1. OpenFeign
```java
1.Feign 是一个声明式的 Web服务客户端（Web服务客户端就是Http客户端），只需创建一个接口并在接口上添加注解即可
2.Java 当中常见的 Http 客户端有很多，SpringBoot自带的 RestTemplate 这些都是 Java 当中常用的 HTTP 请求工具
3.OpenFeign 是Spring Cloud 在 Feign 的基础上支持了 SpringMVC 的注解，如@RequesMapping等等

```

### 2. OpenFeign 使用
```java
OpenFeign 微服务使用步骤：
微服务要通过注册中心来访问服务的，提供者将自己的 ip+端口号 注册到注册中心，
然后对外提供一个 服务名称，消费者根据服务名称去注册中心当中寻找ip和端口

1.导入依赖：
<dependency>
    <groupId>org.springframework.cloud</groupId>
    <artifactId>spring-cloud-starter-openfeign</artifactId>
</dependency>

------------------------------
2.启动类需要添加@EnableFeignClients

------------------------------
3.消费者需要：

@Component
@FeignClient(value = "CLOUD-PAYMENT-SERVICE") //value是提供者的服务名称
public interface PaymentFeignService {

    @GetMapping(value = "/payment/get/{id}")
    CommonResult<Payment> getPaymentById(@PathVariable("id") Long id);
}

------------------------------
4.提供者的接口：

@RestController
@Slf4j
public class PaymentController {

    @Autowired
    private PaymentMapper paymentMapper;

    @Value("${server.port}")
    private String serverPort;

    @GetMapping(value = "/payment/get/{id}")
    public CommonResult<Payment> getPaymentById(@PathVariable("id") Long id) {
        Payment payment = paymentMapper.selectById(id);
        log.info("*****查询结果:{}", payment);
        if (payment != null) {
            return new CommonResult(200, "查询成功, 服务端口：" + serverPort, payment);
        } else {
            return new CommonResult(444, "没有对应记录,查询ID: " + id + ",服务端口：" + serverPort, null);
        }
    }
}

```