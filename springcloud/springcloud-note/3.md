## SpringBoot

根据大佬所写：https://blog.csdn.net/u011709538/article/details/133681195

---
### 1. Kafka与流处理
```java
1.Kafka是一种流处理平台
2.Kafka通过发布/订阅机制实现消息的异步传输和处理
3.具有高吞吐量、低延迟、可伸缩性和可靠性等优点，使其成为了流处理和实时数据管道的首选解决方案
```

### 2. SpringBoot整合Kafka
```java
1.添加Kafka依赖：
<dependency>
      <groupId>org.springframework.kafka</groupId>
      <artifactId>spring-kafka</artifactId>
      <version>2.8.11</version>
</dependency>

------------------------------------------
2.配置Kafka：
spring.kafka.bootstrap-servers=localhost:9092 //端口
spring.kafka.consumer.group-id=test_group //消费者组id
（某一些消费者具备相同的功能，因此会把他们设为同一个消费者组，这样他们就不会重复消费同一条消息了）

------------------------------------------
3.创建Kafka生产者：
在SpringBoot中，我们可以使用 KafkaTemplate 类来创建Kafka生产者
使用 @Autowired 注解来自动注入KafkaTemplate，
并使用send方法将消息发送到名为“test_topic”的Kafka主题中

//service包下的类
@Service
public class KafkaService {
    
    @Autowired
    private KafkaTemplate<String, String> kafkaTemplate;

    public void sendMessage(String message) {
        kafkaTemplate.send("test_topic", message);
    }
}

------------------------------------------
4.创建Kafka消费者：
使用 @KafkaListener 注解来创建Kafka消费者

//listener包下的类
@Component
public class KafkaLis {

    @KafkaListener(topics = "test_topic", groupId = "test_group")
    public void receiveMessage(String message) {
        System.out.println("Received message: " + message);
    }
}

------------------------------------------
5.创建程序入口：
可以启动Spring Boot应用程序，然后发送消息并消费它

//controller包下的类
@RestController
public class MessageController {

    @Autowired
    private KafkaService kafkaService;

    @GetMapping("/send/{message}")
    public String sendMessage(@PathVariable String message) {
        kafkaService.sendMessage(message);
        return "Message sent successfully";
    }
}
```

### 3. 启动与验证
```java
1.启动Kafka有两个必要的服务：Zookeeper 和 Kafka 本身
如何启动忽略。。。。可以上网查看Linux如何安装Zookeeper 和 Kafka，并且启动

2.浏览器输入 http://127.0.0.1:8080/send/hello ，就能成功访问
```

### 4. KafkaTemplate 介绍
```java
它是 Spring 提供的 Kafka 生产者模版，用于向 Kafka 集群发送消息。
并且把 Kafka 的生产者客户端封装成了一个 Spring Bean，提供更加方便易用的 API

------------------------------
它有三个主要属性：
producerFactory：生产者工厂类，用于创建 KafkaProducer 实例。
defaultTopic：默认主题名称，如果在发送消息时没有指定主题名称，则使用该默认主题。
messageConverter：消息转换器，用于将消息对象转换为 Kafka ProducerRecord

------------------------------
它的主要方法：
send(ProducerRecord<K,V> record)：向指定的 Kafka 主题发送一条消息。ProducerRecord 包含了主题名称、分区编号、Key 和 Value 等信息。
send(String topic, V data)：向指定的 Kafka 主题发送一条消息。
send(String topic, K key, V data)：向指定的 Kafka 主题发送一条消息，并指定消息的 Key。
execute(ProducerCallback<K,V> callback)：使用回调方式发送消息，可以自定义消息的创建过程和错误处理过程。
inTransaction()：启用事务，多个 send 方法调用将被包装在一个事务中，保证 Kafka 事务的原子性。
```
